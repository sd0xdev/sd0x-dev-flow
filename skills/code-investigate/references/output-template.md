# Code Investigate Output Template

## 報告結構

```
┌────────────────────────────────────────┐
│ 1. 調查問題                            │
├────────────────────────────────────────┤
│ 2. Claude 視角                         │
│    - 相關檔案                          │
│    - 核心邏輯                          │
│    - 資料流                            │
├────────────────────────────────────────┤
│ 3. Codex 視角                          │
│    - 相關檔案（獨立發現）              │
│    - 核心邏輯                          │
│    - 資料流                            │
├────────────────────────────────────────┤
│ 4. 整合結論                            │
│    - 共識點                            │
│    - 差異點（表格）                    │
│    - 最終結論                          │
│    - 可能遺漏                          │
└────────────────────────────────────────┘
```

## 標準報告格式

```markdown
# 代碼調查報告：[主題]

## 調查問題

[用戶的原始問題]

---

## Claude 視角

### 相關檔案

| 檔案                  | 用途         |
| --------------------- | ------------ |
| `src/service/xxx.ts`  | 主要處理邏輯 |
| `src/provider/yyy.ts` | 外部資料來源 |

### 核心邏輯

[Claude 的理解，含關鍵代碼片段]

### 資料流

[Claude 的分析：輸入 → 處理 → 輸出]

---

## Codex 視角

### 相關檔案

| 檔案                 | 用途         | 備註           |
| -------------------- | ------------ | -------------- |
| `src/service/xxx.ts` | 主要處理邏輯 | 與 Claude 相同 |
| `src/util/zzz.ts`    | 工具函數     | Claude 未發現  |

### 核心邏輯

[Codex 的理解]

### 資料流

[Codex 的分析]

---

## 整合結論

### 共識點

- [雙方都認同的發現 1]
- [雙方都認同的發現 2]

### 差異點

| 議題     | Claude        | Codex        |
| -------- | ------------- | ------------ |
| [議題 1] | [Claude 觀點] | [Codex 觀點] |

### 最終結論

[整合後的完整理解]

### 可能遺漏

- [Codex 發現但 Claude 沒注意到的]
- [需要進一步調查的面向]
```

## 報告撰寫原則

| 原則     | 說明                      | 檢查項               |
| -------- | ------------------------- | -------------------- |
| 視角分離 | Claude/Codex 結論分開呈現 | 兩個視角各有獨立區塊 |
| 標示來源 | 每個發現標明是誰找到的    | 差異點表格註明來源   |
| 差異優先 | 重點呈現雙方不同的發現    | 差異點有詳細說明     |
| 整合總結 | 最後給出整合後的完整理解  | 有最終結論區塊       |
| 承認遺漏 | 列出可能被忽略的面向      | 有可能遺漏區塊       |

## 報告品質檢查

| 檢查項       | 標準                    |
| ------------ | ----------------------- |
| 問題清晰     | 調查問題明確記錄        |
| 視角獨立     | Claude/Codex 結論未混淆 |
| 檔案路徑完整 | 使用絕對路徑            |
| 代碼片段相關 | 引用的代碼支持結論      |
| 差異有解釋   | 差異點說明為何不同      |
| 結論可行動   | 讀者知道下一步做什麼    |
